{
	"info": {
		"_postman_id": "sb-final-demo",
		"name": "SB Finals - URL Shortener Demo",
		"description": "Spring Boot Final Project - URL Shortener with Analytics\n\nCredentials:\n- Admin: admin@urlshortener.com / admin123",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"variable": [
		{"key": "baseUrl", "value": "http://localhost:8080", "type": "string"},
		{"key": "accessToken", "value": "", "type": "string"},
		{"key": "refreshToken", "value": "", "type": "string"},
		{"key": "shortCode", "value": "", "type": "string"}
	],
	"item": [
		{
			"name": "1 - Login",
			"event": [{"listen": "test", "script": {"exec": ["var jsonData = pm.response.json();", "if (jsonData.data) {", "    pm.collectionVariables.set('accessToken', jsonData.data.accessToken);", "    pm.collectionVariables.set('refreshToken', jsonData.data.refreshToken);", "}"], "type": "text/javascript"}}],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {"mode": "raw", "raw": "{\n    \"email\": \"admin@urlshortener.com\",\n    \"password\": \"admin123\"\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/auth/login", "host": ["{{baseUrl}}"], "path": ["api", "v1", "auth", "login"]}
			}
		},
		{
			"name": "2 - Create URL (Basic)",
			"event": [{"listen": "test", "script": {"exec": ["var jsonData = pm.response.json();", "if (jsonData.data) {", "    pm.collectionVariables.set('shortCode', jsonData.data.shortCode);", "}"], "type": "text/javascript"}}],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"originalUrl\": \"https://www.google.com\",\n    \"title\": \"Google Homepage\",\n    \"generateQrCode\": true\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/urls", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls"]}
			}
		},
		{
			"name": "3 - Create URL (Custom Alias)",
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"originalUrl\": \"https://github.com\",\n    \"customAlias\": \"mygithub\",\n    \"title\": \"My GitHub\",\n    \"generateQrCode\": true\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/urls", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls"]}
			}
		},
		{
			"name": "4 - Create URL (Password Protected)",
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"originalUrl\": \"https://private-docs.example.com\",\n    \"customAlias\": \"private\",\n    \"title\": \"Private Document\",\n    \"password\": \"secret123\"\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/urls", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls"]}
			}
		},
		{
			"name": "5 - Create URL (With Expiration)",
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"originalUrl\": \"https://sale.example.com\",\n    \"title\": \"Limited Time Sale\",\n    \"expiresAt\": \"2027-12-31T23:59:59\",\n    \"generateQrCode\": true\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/urls", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls"]}
			}
		},
		{
			"name": "6 - Get All URLs (Pagination)",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/urls?page=0&size=10&sortBy=createdAt&sortDir=desc", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls"], "query": [{"key": "page", "value": "0"}, {"key": "size", "value": "10"}, {"key": "sortBy", "value": "createdAt"}, {"key": "sortDir", "value": "desc"}]}
			}
		},
		{
			"name": "7 - Get URL Details",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/urls/{{shortCode}}", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls", "{{shortCode}}"]}
			}
		},
		{
			"name": "8 - Update URL",
			"request": {
				"method": "PUT",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"title\": \"Updated Google Title\",\n    \"description\": \"This is the updated description\"\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/urls/{{shortCode}}", "host": ["{{baseUrl}}"], "path": ["api", "v1", "urls", "{{shortCode}}"]}
			}
		},
		{
			"name": "9 - Redirect URL",
			"request": {
				"method": "GET",
				"header": [],
				"url": {"raw": "{{baseUrl}}/r/{{shortCode}}", "host": ["{{baseUrl}}"], "path": ["r", "{{shortCode}}"]}
			}
		},
		{
			"name": "10 - Preview URL",
			"request": {
				"method": "GET",
				"header": [],
				"url": {"raw": "{{baseUrl}}/r/{{shortCode}}/preview", "host": ["{{baseUrl}}"], "path": ["r", "{{shortCode}}", "preview"]}
			}
		},
		{
			"name": "11 - Access Password URL (Shows 403)",
			"request": {
				"method": "GET",
				"header": [],
				"url": {"raw": "{{baseUrl}}/r/private", "host": ["{{baseUrl}}"], "path": ["r", "private"]}
			}
		},
		{
			"name": "12 - Verify Password",
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {"mode": "raw", "raw": "{\n    \"password\": \"secret123\"\n}"},
				"url": {"raw": "{{baseUrl}}/r/private/verify", "host": ["{{baseUrl}}"], "path": ["r", "private", "verify"]}
			}
		},
		{
			"name": "13 - Get QR Code",
			"request": {
				"method": "GET",
				"header": [],
				"url": {"raw": "{{baseUrl}}/api/v1/qr/{{shortCode}}", "host": ["{{baseUrl}}"], "path": ["api", "v1", "qr", "{{shortCode}}"]}
			}
		},
		{
			"name": "14 - Analytics Dashboard",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/analytics/dashboard", "host": ["{{baseUrl}}"], "path": ["api", "v1", "analytics", "dashboard"]}
			}
		},
		{
			"name": "15 - URL Analytics",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/analytics/urls/{{shortCode}}", "host": ["{{baseUrl}}"], "path": ["api", "v1", "analytics", "urls", "{{shortCode}}"]}
			}
		},
		{
			"name": "16 - Get User Profile",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/users/me", "host": ["{{baseUrl}}"], "path": ["api", "v1", "users", "me"]}
			}
		},
		{
			"name": "17 - Update Profile",
			"request": {
				"method": "PUT",
				"header": [{"key": "Content-Type", "value": "application/json"}, {"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"body": {"mode": "raw", "raw": "{\n    \"name\": \"Admin User\"\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/users/me", "host": ["{{baseUrl}}"], "path": ["api", "v1", "users", "me"]}
			}
		},
		{
			"name": "18 - Admin Stats",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/admin/stats", "host": ["{{baseUrl}}"], "path": ["api", "v1", "admin", "stats"]}
			}
		},
		{
			"name": "19 - Admin List Users",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/admin/users?page=0&size=10", "host": ["{{baseUrl}}"], "path": ["api", "v1", "admin", "users"], "query": [{"key": "page", "value": "0"}, {"key": "size", "value": "10"}]}
			}
		},
		{
			"name": "20 - Admin List URLs",
			"request": {
				"method": "GET",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/admin/urls?page=0&size=10", "host": ["{{baseUrl}}"], "path": ["api", "v1", "admin", "urls"], "query": [{"key": "page", "value": "0"}, {"key": "size", "value": "10"}]}
			}
		},
		{
			"name": "21 - Refresh Token",
			"event": [{"listen": "test", "script": {"exec": ["var jsonData = pm.response.json();", "if (jsonData.data) {", "    pm.collectionVariables.set('accessToken', jsonData.data.accessToken);", "    pm.collectionVariables.set('refreshToken', jsonData.data.refreshToken);", "}"], "type": "text/javascript"}}],
			"request": {
				"method": "POST",
				"header": [{"key": "Content-Type", "value": "application/json"}],
				"body": {"mode": "raw", "raw": "{\n    \"refreshToken\": \"{{refreshToken}}\"\n}"},
				"url": {"raw": "{{baseUrl}}/api/v1/auth/refresh", "host": ["{{baseUrl}}"], "path": ["api", "v1", "auth", "refresh"]}
			}
		},
		{
			"name": "22 - Logout",
			"request": {
				"method": "POST",
				"header": [{"key": "Authorization", "value": "Bearer {{accessToken}}"}],
				"url": {"raw": "{{baseUrl}}/api/v1/auth/logout", "host": ["{{baseUrl}}"], "path": ["api", "v1", "auth", "logout"]}
			}
		}
	]
}
